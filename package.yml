name       : glib2
version    : 2.66.2
release    : 66
source     :
    - https://download.gnome.org/sources/glib/2.66/glib-2.66.2.tar.xz : ec390bed4e8dd0f89e918f385e8d4cfd7470b1ef7c1ce93ec5c4fc6e3c6a17c4
license    : LGPL-2.1-or-later
summary    : Low level C library containing data structure handling and interfaces
description: |
    GLib is the low-level core library that forms the basis for projects such as GTK+ and GNOME. It provides data structure handling for C, portability wrappers, and interfaces for such runtime functionality as an event loop, threads, dynamic loading, and an object system.
component  : system.base
emul32     : yes
builddeps  :
    - pkgconfig32(dbus-1)
    - pkgconfig32(libelf)
    - pkgconfig32(libffi)
    - pkgconfig32(liblzma)
    - pkgconfig32(libpcre)
    - pkgconfig32(mount)
    - pkgconfig32(zlib)
    - libgcrypt-32bit-devel
setup      : |
    %patch -p1 < $pkgfiles/0001-Support-stateless-XDG-and-snap-directories.patch
    %patch -p1 < $pkgfiles/0001-add-additional-terminals-to-gio.patch
    %patch -p1 < $pkgfiles/0001-Disable-tests.patch
    %meson_configure -Dgtk_doc=false
build      : |
    %ninja_build
install    : |
    %ninja_install
    # Allow emul32 to work correctly.
    install -Dm00644 $pkgfiles/glibconfig.h $installdir/usr/include/glib-2.0/glibconfig.h
